<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Portable Prompter</title>
<style>
body{background:black;margin:0;padding:0;font-family:Helvetica,Arial;color:white;overflow:hidden}
.container{width:100%;height:100%;overflow:auto}
.prompter,#reference{display:block;font-size:25px;font-family:Helvetica,Arial;text-transform:uppercase;font-weight:bold;color:#FFF;background:black;margin-left:50px}
#textentry{font-family:Helvetica,Arial;font-size:12px;color:white;background:#555;padding:5px;width:700px;margin:20px auto}
#textentry textarea{border:0;padding:5px;width:100%;height:200px}
#textentry fieldset{background:#333;border:2px solid white;padding:15px;margin-top:10px}
.counter{font-family:Helvetica,Arial;color:white;font-size:20px;font-weight:bold;background:#444;text-align:center;padding:5px;min-width:30px;display:inline-block}
.gButton{font-family:Helvetica,Arial;color:white;font-size:16px;font-weight:bold;background:#666;border-radius:5px;padding:8px 12px;border:none;cursor:pointer;margin:2px}
.gButton:hover{background:#888}
#controller{height:80px;bottom:0;position:fixed;width:100%;z-index:999;background:#333;padding:10px 0;display:flex;justify-content:center;align-items:center}
.control-group{display:flex;align-items:center;margin:0 15px;background:#444;padding:8px;border-radius:8px}
.control-label{color:#ccc;font-size:12px;margin-right:8px;font-weight:bold}
.control-buttons{display:flex;gap:5px}
.control-value{color:#fff;font-size:16px;font-weight:bold;margin:0 10px;min-width:30px;text-align:center}
.hl{color:#FFFC40}.pause{color:#444}
.flipped{direction:rtl;unicode-bidi:bidi-override;text-align:right}
#preview{background:#222;padding:10px;margin:10px 0;border:1px solid #666;text-align:center;min-height:40px;display:flex;align-items:center;justify-content:center}
</style>
<script>
var $=function(a){return document.getElementById(a)};var PROMPT_STOPPED=0;var PROMPT_PLAYING=1;var promptState=PROMPT_STOPPED;var lastTop=0;var pauseCounter=0;var speed=1;var fsize=26;var ftimer=0;var timerID=0;
function getSelection(a){var c=[a.value,"","",""];if(document.selection){var d="#$%^%$#";var b=document.selection.createRange();if(b.parentElement()!=a){return null}c[2]=b.text;b.text=d;fb=a.value.split(d);b.moveStart("character",-d.length);b.text=c[2];c[1]=fb[0];c[3]=fb[1]}else{if(a.selectionStart==a.selectionEnd){return null}c=(new RegExp("([\\x00-\\xff]{"+a.selectionStart+"})([\\x00-\\xff]{"+(a.selectionEnd-a.selectionStart)+"})([\\x00-\\xff]*)")).exec(a.value)}return c}
function addPTag(b,a){bits=getSelection(b);if(bits){b.value=bits[1]+"["+a+"]"+bits[2]+"[/"+a+"]"+bits[3]}}
var PromptController=function(){this.skipspeed=60;this.rolling=false;this.rolldirection=1;this.paused=false;this.actualspeed=speed;this.reachedEnd=false;var d=null;var a=null;var c=null;var b=null;this.init=function(){this.updateSpeedLabel();this.updateFontSize();this.setPlayButton();d=$("container");c=$("prompter");b=$("reference")};this.setSpeed=function(f){this.actualspeed=f;speed=f;this.updateSpeedLabel()};this.setFontSize=function(f){c.style.fontSize=f;b.style.fontSize=f;this.updateFontSize()};this.start=function(f){a=$("endmarker");promptState=PROMPT_PLAYING;if(!f){this.reset()}clearInterval(timerID);that=this;this.setPlayButton();timerID=setInterval("that.stepDown()",30)};this.stop=function(){clearInterval(timerID);promptState=PROMPT_STOPPED;this.setPlayButton()};this.reset=function(){this.stop();lastTop=0;pauseCounter=0;d.scrollTop=0;this.reachedEnd=0;this.setPlayButton()};var e=0;this.stepDown=function(){var g=0.67;if(this.rolling){speed=this.skipspeed*this.rolldirection}else{if(this.paused){speed=0;g=0}else{speed=this.actualspeed}}if(lastTop<-1){lastTop=0}lastTop=lastTop+(speed/3+g);d.scrollTop=lastTop;if(e==d.scrollTop&&!this.paused){this.reachedEnd=true;lastTop=d.scrollTop;this.stop()}else{e=d.scrollTop;var f=$("pause"+pauseCounter);if(f!=null){if(f.offsetTop<=lastTop){this.pause(1000)}}}};this.pause=function(f){that=this;pauseCounter++;this.paused=true;setTimeout("that.resume()",f)};this.resume=function(){lastTop=lastTop+1;this.paused=false};this.setPlayButton=function(){$("play").textContent=promptState==PROMPT_PLAYING?"❚❚":"▶"};this.toggle=function(){this.togglePlay();this.setPlayButton()};this.togglePlay=function(){if(promptState==PROMPT_PLAYING){this.stop()}else{this.start(true)}};this.rollBack=function(f){this.start(true);this.rolling=f;this.rolldirection=-1;this.reachedEnd=false};this.rollFwd=function(f){if(!this.reachedEnd){this.start(true);this.rolling=f;this.rolldirection=1}};this.speedUp=function(){if(!this.paused){speed+=1;this.actualspeed=speed;this.updateSpeedLabel()}};this.speedDown=function(){if(!this.paused){speed=(speed>2)?--speed:1;this.actualspeed=speed;this.updateSpeedLabel()}};this.updateSpeedLabel=function(){$("currentspeed").textContent=speed};this.updateFontSize=function(){$("currentfont").textContent=fsize};this.fontstop=function(){clearInterval(ftimer);ftimer=0};this.fontDown=function(){fsize=Math.max(10,fsize-1);c.style.fontSize=fsize+"px";b.style.fontSize=fsize+"px";this.updateFontSize();that=this;if(!ftimer){ftimer=setInterval("that.fontDown()",100)}};this.fontUp=function(){fsize=Math.min(100,fsize+1);c.style.fontSize=fsize+"px";b.style.fontSize=fsize+"px";this.updateFontSize();that=this;if(!ftimer){ftimer=setInterval("that.fontUp()",100)}}};
function escapeHTML(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function formatit(){$("textentry").style.display="none";var j=escapeHTML($("promptinput").value);j=j.replace(/\n/g,"<br/>");var g=parseInt($("initialspeed").value)||1;var d=parseInt($("initialfont").value)||26;var a=$("initialflip").checked;Controller.setSpeed(g);Controller.setFontSize(d);Controller.reset();var e="<span class='pause' id='pause'>[pause]</span>";if(a){h=j}else{var h=j.replace(/\[pause\]/g,e);var h=h.replace(/\[hl\]/g,"<span class='hl'>");var h=h.replace(/\[\/hl\]/g,"</span>")}$("prompter").innerHTML=h;if(!a){var f=document.getElementsByClassName("pause");for(i in f){f[i].id="pause"+i}}$("controller").style.display="flex";var b=$("prompter");b.style.textTransform=$("initialcap").checked?"uppercase":"none";if(a){b.className="prompter flipped";}else{b.className="prompter";}startmsg="[Hit Play to start]";endmsg="[END]";if(a){startmsg=startmsg.split("").reverse().join("");endmsg=endmsg.split("").reverse().join("");}b.innerHTML="<br/><br/>"+startmsg+"<br/><br/>"+b.innerHTML+"<span id='endmarker'><br/><br/>"+endmsg+"<br/><br/><br/></span>";$("container").style.overflow="hidden";document.body.style.padding="0 0 90px 0";$("topper").style.display="none"}
function interpretKey(b){var a=b||window.event;if(a.type=="keydown"){switch(a.keyCode){case 37:Controller.speedDown();break;case 39:Controller.speedUp();break;case 38:Controller.rollBack(true);break;case 40:Controller.rollFwd(true);break;case 32:Controller.toggle();break;case 27:Controller.reset();break}}}
function wheel(a){var b=0;if(!a)a=window.event;if(a.wheelDelta){b=a.wheelDelta/120}else if(a.detail){b=-a.detail/3}if(b){if(b<0)Controller.speedDown();else Controller.speedUp();if(a.preventDefault)a.preventDefault();a.returnValue=false}}
var Controller=new PromptController();var isEditing=true;
function submitScript(a){if(a){isEditing=true;$("container").style.overflow="auto";document.body.style.padding="0";$("textentry").style.display="block";$("controller").style.display="none";$("topper").style.display="block";$("prompter").innerHTML=""}else{isEditing=false;formatit()}if(!isEditing){window.addEventListener("DOMMouseScroll",wheel,false);window.onmousewheel=document.onmousewheel=wheel}else{window.removeEventListener("DOMMouseScroll",wheel,false);window.onmousewheel=document.onmousewheel=null}}
function previewText(){var b=$("preview");b.style.display="none";b.style.textTransform=$("initialcap").checked?"uppercase":"none";b.style.fontSize=parseInt($("initialfont").value)+"px";var a=$("initialflip").checked;if(a){b.className="flipped";b.textContent="txeT weiverP";}else{b.className="";b.textContent="Preview Text";}b.style.display="flex"}
</script>
</head> 
<body onkeydown='interpretKey(event)'>
<div class='container' id='container'>
<div id='topper' style='background:#333;padding:10px;text-align:center;color:#ffdf60;font-weight:bold'>Portable Prompter<!/div>
<!div id='textentry'>/Enter script:<!div id='textcontrols'><button onclick="addPTag($('promptinput'),'hl')" class='gButton'><b>Highlight</b></button></div>
<form name='createpromptform'><textarea id='promptinput' name='promptinput'  rows=20 cols=110 placeholder="Enter your script here..."></textarea><br/>
<fieldset>
<label>Start_Font_Size: <input type='number' id='initialfont' name='initialfont' value='26' min='10' max='100' onchange='previewText()'/></label>
<label>Start_Speed: <input type='number' id='initialspeed' name='initialspeed' value='1' min='1' max='20' onchange='previewText()'/></label>
<label>Capitalize text <input type='checkbox' name='initialcap' id='initialcap' onchange='previewText()'></label>
<label>Flip text <input type='checkbox' name='initialflip' id='initialflip' onchange='previewText()'/></label>
<a href="javascript:submitScript()" class='gButton' style='display:block;text-align:center;margin:10px 0;padding:10px;background:#ffdf60;color:black'>Start Prompter</a>
<div id='preview'>Preview Text</div>
</fieldset>
</form>
</div>
<div id='reference' style='visibility:hidden;'>Wait</div>
<div class='prompter' id='prompter'></div>
</div>

<div id="controller" style="display:none">
<div class="control-group">
    <div class="control-label">Jog</div>
    <div class="control-buttons">
        <button class="gButton" onclick="Controller.toggle()" title="Stop-[ESCAPE]">■</button>
        <button class="gButton" id="play" onclick="Controller.toggle()" title="Play-[SPACE]">▶</button>
        <button class="gButton" onmousedown="Controller.rollBack(true)" onmouseup="Controller.rollBack(false)" title="Rewind-[UP]">◀◀</button>
        <button class="gButton" onmousedown="Controller.rollFwd(true)" onmouseup="Controller.rollFwd(false)" title="Fast Forward-[DOWN]">▶▶</button>
    </div>
</div>

<div class="control-group">
    <div class="control-label">Speed</div>
    <div class="control-buttons">
        <button class="gButton" onclick="Controller.speedDown()" title="Slow Down-[LEFT]">-</button>
        <div class="control-value" id="currentspeed">1</div>
        <button class="gButton" onclick="Controller.speedUp()" title="Speed Up-[RIGHT]">+</button>
    </div>
</div>

<div class="control-group">
    <button class="gButton" onclick="Controller.reset(); submitScript(1);" title="Edit Script" style="background:#555">Edit</button>
</div>

<div class="control-group">
    <div class="control-label">Font</div>
    <div class="control-buttons">
        <button class="gButton" onmousedown="Controller.fontDown()" onmouseup="Controller.fontstop()">▼</button>
        <div class="control-value" id="currentfont">26</div>
        <button class="gButton" onmousedown="Controller.fontUp()" onmouseup="Controller.fontstop()">▲</button>
    </div>
</div>
</div>

<script>Controller.init();previewText();</script>
</body></html>
